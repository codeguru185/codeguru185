import os
import shutil
from datetime import datetime, timedelta

def delete_old_directories(input_directory, threshold_months):
    # Get current date
    current_date = datetime.now()
    
    # Calculate the date threshold
    threshold_date = current_date - timedelta(days=threshold_months * 30)

    # Loop through subdirectories in the input directory
    for root, dirs, files in os.walk(input_directory, topdown=False):
        for directory in dirs:
            try:
                # Convert directory name to datetime object
                directory_date = datetime.strptime(directory, '%Y-%m-%d')
                
                # Check if directory is older than threshold
                if directory_date < threshold_date:
                    # Delete the entire subdirectory
                    shutil.rmtree(os.path.join(root, directory))
                    print(f"Deleted: {os.path.join(root, directory)}")
            except ValueError:
                # Directory name does not match the expected format, skip
                pass

# Example usage:
input_paths = ["/path/to/directory1", "/path/to/directory2"]  # List of input paths
threshold_months = 6  # Threshold number of months

for input_directory in input_paths:
    delete_old_directories(input_directory, threshold_months)
